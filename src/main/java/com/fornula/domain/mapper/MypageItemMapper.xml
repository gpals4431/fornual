<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fornula.domain.member.mapper.java.MypageItemMapper">
	
	<!-- 마이페이지의 구매내역에서 사용할 SQL문 -->
	
	<!-- 상품 뽑는 쿼리 -->
	<!-- 상품 사진 뽑는 쿼리 수정해야함 -->
	<!-- 구매테이블에서 구매번호,구매날짜,구매상태를 현재세션의 회원idx로 뽑는 쿼리
	<select id="selectPurchaseMypage" resultType="Itempurchase" >
		select   purchase.purchase_idx
                ,purchase.purchase_date
                ,purchase.purchase_status
                ,item.item_idx
                ,item.item_name
                ,item.item_content
                ,item.price
		from purchase join item
		on purchase.item_idx=item.item_idx
		where purchase.member_idx = #{memberIdx}
	</select> -->
	
	<select id="selectPurchaseMypage" resultType="Itempurchase" >
		select itempurchase.purchase_idx
                ,itempurchase.purchase_date
                ,itempurchase.purchase_status
                ,itempurchase.item_idx
                ,itempurchase.item_name
                ,itempurchase.item_content
                ,itempurchase.price
                ,photo.itemfile_name
		from (select   purchase.purchase_idx
                ,purchase.purchase_date
                ,purchase.purchase_status
                ,item.item_idx
                ,item.item_name
                ,item.item_content
                ,item.price
		from purchase join item
		on purchase.item_idx=item.item_idx
		where purchase.member_idx = #{memberIdx}) itempurchase join photo
		on itempurchase.item_idx=photo.item_idx

	</select>

	
	
</mapper>
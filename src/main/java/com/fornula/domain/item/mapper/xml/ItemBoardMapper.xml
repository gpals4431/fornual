<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fornula.domain.item.mapper.java.ItemInsertMapper">
	<!-- 상품 게시판에서 상품 리스트들을 뽑을 때 사용하는 SQL문 -->
	<!-- PHOTO,EXPERT 테이블도 조인해서 작성해야 함 -->
	<select id="selectItemList" resultType="ItemPhotoCategoryCart">
		select item_idx
			,expert_idx
			,item_name
			,item_content
			,price
			,item_date
			,itemfile_name
		from item, photo
		where item_status=1 
			and PHOTO.photo_idx=ITEM.photo_idx 
		order by item_date	
	</select>
	
	
	<!-- 카테고리를 입력받아서 해당 카테고리에 포함되어 있는 상품들만 출력하기 -->
	<select id="selectCategoryItemList" resultType="ItemPhotoCategoryCart">
		select item_idx
			,category_idx
			,small 
			,expert_idx
			,item_name
			,item_content
			,price
			,item_date
		from category,item
		where CATEGORY.category_idx=ITEM.category_idx
			and category_idx=#{categoryIdx}
	</select>
	
	
	<!-- 검색창에서 상품 이름 중 일부분을 검색시에 해당 검색어가 상품 이름에 들어가있는 모든 상품을 검색하기 -->
	<select id="searchItemList" resultType="ItemPhotoCategoryCart">
		select item_idx
			,expert_idx
			,item_name
			,item_content
			,price
			,item_date
			,itemfile_name
		from item, photo
		where item_status=1
			and PHOTO.photo_idx=ITEM.photo_idx 
			and item_name like '#{itemName}'
	</select>
	
	<select id="selectItemBoardCount" resultType="int">
		select count(*) 
		from item
		where item_status=1
	</select>
</mapper>